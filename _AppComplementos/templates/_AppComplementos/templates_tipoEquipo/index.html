{% extends "base.html" %}
{% load static %} 

{% block title %}Tipos de Equipo - GISME{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Gestión de Tipos de Equipo</h1>

    <!-- Formulario de Registro -->
    <div class="card p-4 mt-4">
        <form id="tipoEquipoForm" class="row g-3">
            {% csrf_token %}

            <div class="row align-items-end">
                <!-- Campo Nombre -->
                <div class="col-md-3 mb-3">
                    <label for="name" class="form-label">Nombre</label>
                    <input type="text" class="form-control" name="name" id="name" required>
                </div>

                <!-- Dropdown Producto -->
                <div class="col-md-3 mb-3">
                    <label for="productoDropdown" class="form-label">Producto</label>
                    <select id="productoDropdown" class="form-select" required>
                        <option value="">Seleccione un producto</option>
                    </select>
                </div>

                <!-- Dropdown Tipo de Criticidad -->
                <div class="col-md-3 mb-3">
                    <label for="tipoCriticidadDropdown" class="form-label">Tipo Criticidad</label>
                    <select id="tipoCriticidadDropdown" class="form-select" disabled required>
                        <option value="">Seleccione tipo</option>
                    </select>
                </div>

                <!-- Dropdown Criticidad -->
                <div class="col-md-3 mb-3">
                    <label for="criticidadDropdown" class="form-label">Criticidad</label>
                    <select id="criticidadDropdown" class="form-select" disabled required>
                        <option value="">Seleccione criticidad</option>
                    </select>
                </div>
            </div>

            <div class="col-12 text-center mt-3">
                <button type="submit" class="btn btn-success">Registrar Tipo de Equipo</button>
            </div>
        </form>
    </div>

    <!-- Controles de búsqueda y paginación -->
    <div class="mt-4 mb-3">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-search"></i></span>
                    <input type="text" class="form-control" id="searchInput" placeholder="Buscar tipos de equipo...">
                    <button class="btn btn-outline-secondary" type="button" id="clearSearch">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-6 text-end">
                <label for="recordsPerPage" class="form-label me-2">Mostrar:</label>
                <select id="recordsPerPage" class="form-select d-inline-block w-auto">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
                <span class="ms-2">registros por página</span>
            </div>
        </div>
    </div>

    <!-- Tabla de Tipos de Equipo Registrados -->
    <div class="mt-3 mb-4">
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center">
                <thead class="table-dark">
                    <tr>
                        <th>Tipo de Equipo</th>
                        <th>Producto</th>
                        <th>Tipo de Criticidad</th>
                        <th>Criticidad</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tipoEquipoTableBody">
                    <!-- Las filas se cargarán dinámicamente con JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Paginación -->
    <nav aria-label="Paginación de tipos de equipo">
        <ul class="pagination justify-content-center">
            <!-- La paginación se cargará dinámicamente con JavaScript -->
        </ul>
    </nav>
</div>

<!-- Modales -->
{% include '_AppComplementos/templates_tipoEquipo/_modal_editarTipoEquipo.html' %}

{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static '_AppComplementos/static_tipoEquipo/css/styles.css' %}">
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static '_AppComplementos/static_tipoEquipo/js/events.js' %}"></script>
{% endblock %}
